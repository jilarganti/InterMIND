---
title: "Автоматический импорт"
description: "Nuxt автоматически импортирует компоненты, композаблы, вспомогательные функции и Vue API."
---

Nuxt автоматически импортирует компоненты, композаблы и [Vue.js API](https://vuejs.org/api) для использования в вашем приложении без явного импорта.

```vue twoslash [app.vue]
<script setup lang="ts">
const count = ref(1) // ref импортируется автоматически
</script>
```

Благодаря своей структуре каталогов, Nuxt может автоматически импортировать ваши [`components/`](/docs/guide/directory-structure/components), [`composables/`](/docs/guide/directory-structure/composables) и [`utils/`](/docs/guide/directory-structure/utils).

В отличие от классического глобального объявления, Nuxt сохраняет типизацию, автодополнение IDE и подсказки, и **включает только то, что используется в вашем продакшн коде**.

::note
В документации каждая функция, которая не импортирована явно, автоматически импортируется Nuxt и может использоваться как есть в вашем коде. Вы можете найти справочник по автоматически импортируемым компонентам, композаблам и утилитам в [разделе API](/docs/api).
::

::note
В каталоге [`server`](/docs/guide/directory-structure/server) Nuxt автоматически импортирует экспортируемые функции и переменные из `server/utils/`.
::

::note
Вы также можете автоматически импортировать функции, экспортируемые из пользовательских папок или сторонних пакетов, настроив секцию [`imports`](/docs/api/nuxt-config#imports) в вашем файле `nuxt.config`.
::

## Встроенные автоимпорты

Nuxt автоматически импортирует функции и композаблы для выполнения [получения данных](/docs/getting-started/data-fetching), получения доступа к [контексту приложения](/docs/api/composables/use-nuxt-app) и [конфигурации времени выполнения](/docs/guide/going-further/runtime-config), управления [состоянием](/docs/getting-started/state-management) или определения компонентов и плагинов.

```vue twoslash
<script setup lang="ts">
/* useFetch() импортируется автоматически */
const { data, refresh, status } = await useFetch('/api/hello')
</script>
```

Vue предоставляет API реактивности, такие как `ref` или `computed`, а также хуки жизненного цикла и помощники, которые автоматически импортируются Nuxt.

```vue twoslash
<script setup lang="ts">
/* ref() и computed() импортируются автоматически */
const count = ref(1)
const double = computed(() => count.value * 2)
</script>
```

### Композаблы Vue и Nuxt

<!-- TODO: переместить на отдельную страницу с https://github.com/nuxt/nuxt/issues/14723 и добавить больше информации -->

При использовании встроенных композаблов Composition API, предоставляемых Vue и Nuxt, имейте в виду, что многие из них зависят от вызова в правильном _контексте_.

Во время жизненного цикла компонента Vue отслеживает временный экземпляр текущего компонента (и аналогично, Nuxt отслеживает временный экземпляр `nuxtApp`) через глобальную переменную, а затем сбрасывает её в том же тике. Это важно при серверном рендеринге, как для предотвращения загрязнения состояния между запросами (утечка общей ссылки между двумя пользователями), так и для предотвращения утечек между различными компонентами.

Это означает, что (за очень редкими исключениями) вы не можете использовать их вне плагина Nuxt, промежуточного ПО маршрута Nuxt или функции setup Vue. Кроме того, вы должны использовать их синхронно - то есть, вы не можете использовать `await` перед вызовом композабла, за исключением блоков `<script setup>`, функции setup компонента, объявленного с `defineNuxtComponent`, в `defineNuxtPlugin` или в `defineNuxtRouteMiddleware`, где мы выполняем преобразование для сохранения синхронного контекста даже после `await`.

Если вы получаете сообщение об ошибке типа `Nuxt instance is unavailable`, то это, вероятно, означает, что вы вызываете композабл Nuxt в неправильном месте жизненного цикла Vue или Nuxt.

:video-accordion{title="Посмотрите видео от Alexander Lichter о том, как избежать ошибки 'Nuxt instance is unavailable'" videoId="ofuKRZLtOdY"}

::tip
При использовании композабла, который требует контекст Nuxt внутри компонента не-SFC, вам нужно обернуть ваш компонент с `defineNuxtComponent` вместо `defineComponent`
::

::read-more{to="/docs/guide/going-further/experimental-features#asynccontext" icon="i-lucide-star"}
Ознакомьтесь с экспериментальной функцией `asyncContext` для использования композаблов Nuxt в асинхронных функциях.
::

::read-more{to="https://github.com/nuxt/nuxt/issues/14269#issuecomment-1397352832" target="_blank"}
Смотрите полное объяснение в этом комментарии GitHub.
::

**Пример неработающего кода:**

```ts twoslash [composables/example.ts]
// попытка доступа к конфигурации времени выполнения вне композабла
const config = useRuntimeConfig()

export const useMyComposable = () => {
  // доступ к конфигурации времени выполнения здесь
}
```

**Пример рабочего кода:**

```ts twoslash [composables/example.ts]
export const useMyComposable = () => {
  // Поскольку ваш композабл вызывается в правильном месте жизненного цикла,
  // useRuntimeConfig будет работать здесь
  const config = useRuntimeConfig()

  // ...
}
```

## Автоматический импорт на основе директорий

Nuxt автоматически импортирует файлы, созданные в определенных директориях:

- `components/` для [Vue компонентов](/docs/guide/directory-structure/components).
- `composables/` для [Vue композаблов](/docs/guide/directory-structure/composables).
- `utils/` для вспомогательных функций и других утилит.

:link-example{to="/docs/examples/features/auto-imports"}

::warning
**Автоматически импортированные `ref` и `computed` не будут развернуты в `<template>` компонента.** :br
Это связано с тем, как Vue работает с refs, которые не находятся на верхнем уровне шаблона. Вы можете прочитать больше об этом [в документации Vue](https://vuejs.org/guide/essentials/reactivity-fundamentals.html#caveat-when-unwrapping-in-templates).
::

### Явный импорт

Nuxt предоставляет каждый автоматический импорт с псевдонимом `#imports`, который можно использовать для явного импорта при необходимости:

<!-- TODO:twoslash: Twoslash does not support tsconfig paths yet -->

```vue
<script setup lang="ts">
import { ref, computed } from '#imports'

const count = ref(1)
const double = computed(() => count.value * 2)
</script>
```

### Отключение автоматического импорта

Если вы хотите отключить автоматический импорт композаблов и утилит, вы можете установить `imports.autoImport` в `false` в файле `nuxt.config`.

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  imports: {
    autoImport: false
  }
})
```

Это полностью отключит автоматический импорт, но все еще будет возможно использовать [явный импорт](#explicit-imports) из `#imports`.

### Частичное отключение автоматического импорта

Если вы хотите, чтобы специфичные для фреймворка функции, такие как `ref`, оставались автоматически импортированными, но желаете отключить автоматический импорт для вашего собственного кода (например, пользовательских композаблов), вы можете установить опцию `imports.scan` в `false` в вашем файле `nuxt.config.ts`:

```ts
export default defineNuxtConfig({
  imports: {
    scan: false
  }
})
```

С этой конфигурацией:
- Функции фреймворка, такие как `ref`, `computed` или `watch`, по-прежнему будут работать без необходимости ручного импорта.
- Пользовательский код, такой как композаблы, потребуется импортировать вручную в ваших файлах.

::warning
**Внимание:** Эта настройка имеет определенные ограничения:
- Если вы структурируете свой проект со слоями, вам потребуется явно импортировать композаблы из каждого слоя, а не полагаться на автоматический импорт.
- Это нарушает функцию переопределения системы слоев. Если вы используете `imports.scan: false`, убедитесь, что понимаете этот побочный эффект и соответствующим образом корректируете свою архитектуру.
::

## Автоматически импортируемые компоненты

Nuxt также автоматически импортирует компоненты из вашей директории `~/components`, хотя это настраивается отдельно от автоматического импорта композаблов и утилитарных функций.

:read-more{to="/docs/guide/directory-structure/components"}

Чтобы отключить автоматический импорт компонентов из вашей собственной директории `~/components`, вы можете установить `components.dirs` в пустой массив (хотя обратите внимание, что это не повлияет на компоненты, добавленные модулями).

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  components: {
    dirs: []
  }
})
```

## Автоматический импорт из сторонних пакетов

Nuxt также позволяет автоматически импортировать из сторонних пакетов.

::tip
Если вы используете модуль Nuxt для этого пакета, вероятно, модуль уже настроил автоматический импорт для этого пакета.
::

Например, вы можете включить автоматический импорт композабла `useI18n` из пакета `vue-i18n` следующим образом:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  imports: {
    presets: [
      {
        from: 'vue-i18n',
        imports: ['useI18n']
      }
    ]
  }
})
```

:video-accordion{title="Посмотрите видео от Alexander Lichter о том, как легко настроить пользовательский автоматический импорт" videoId="FT2LQJ2NvVI"}