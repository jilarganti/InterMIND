---
title: "app.config.ts"
head.title: "app.config.ts"
description: "Предоставьте реактивную конфигурацию в вашем приложении с помощью файла конфигурации приложения."
navigation.icon: i-lucide-file
---

Nuxt предоставляет файл конфигурации `app.config` для предоставления реактивной конфигурации в вашем приложении с возможностью обновления во время выполнения в рамках жизненного цикла или с использованием плагина nuxt и редактирования с помощью HMR (горячая замена модулей).

Вы можете легко предоставить конфигурацию приложения времени выполнения, используя файл `app.config.ts`. Он может иметь расширения `.ts`, `.js` или `.mjs`.

```ts twoslash [app.config.ts]
export default defineAppConfig({
  foo: 'bar'
})
```

::caution
Не помещайте никаких секретных значений в файл `app.config`. Он доступен в клиентском пакете пользователя.
::

::note
При настройке пользовательского [`srcDir`](/docs/api/nuxt-config#srcdir), убедитесь, что файл `app.config` размещен в корне нового пути `srcDir`.
::

## Использование

Чтобы предоставить конфигурацию и переменные окружения остальной части вашего приложения, вам необходимо определить конфигурацию в файле `app.config`.

```ts twoslash [app.config.ts]
export default defineAppConfig({
  theme: {
    primaryColor: '#ababab'
  }
})
```

Теперь мы можем универсально получить доступ к `theme` как при серверном рендеринге страницы, так и в браузере, используя композабл [`useAppConfig`](/docs/api/composables/use-app-config).

```vue [pages/index.vue]
<script setup lang="ts">
const appConfig = useAppConfig()

console.log(appConfig.theme)
</script>
```

Утилита [`updateAppConfig`](/docs/api/utils/update-app-config) может использоваться для обновления `app.config` во время выполнения.

```vue [pages/index.vue]
<script setup>
const appConfig = useAppConfig() // { foo: 'bar' }

const newAppConfig = { foo: 'baz' }

updateAppConfig(newAppConfig)

console.log(appConfig) // { foo: 'baz' }
</script>
```

::read-more{to="/docs/api/utils/update-app-config"}
Узнайте больше об утилите `updateAppConfig`.
::

## Типизация конфигурации приложения

Nuxt пытается автоматически сгенерировать TypeScript интерфейс из предоставленной конфигурации приложения, чтобы вам не пришлось типизировать её самостоятельно.

Однако есть случаи, когда вы можете захотеть типизировать её самостоятельно. Есть две возможные вещи, которые вы можете захотеть типизировать.

### Входные данные конфигурации приложения

`AppConfigInput` может использоваться авторами модулей, которые объявляют, какие допустимые _входные_ параметры доступны при настройке конфигурации приложения. Это не повлияет на тип `useAppConfig()`.

```ts [index.d.ts]
declare module 'nuxt/schema' {
  interface AppConfigInput {
    /** Конфигурация темы */
    theme?: {
      /** Основной цвет приложения */
      primaryColor?: string
    }
  }
}

// Всегда важно убедиться, что вы импортируете/экспортируете что-то при расширении типа
export {}
```

### Выходные данные конфигурации приложения

Если вы хотите типизировать результат вызова [`useAppConfig()`](/docs/api/composables/use-app-config), то вам нужно расширить `AppConfig`.

::warning
Будьте осторожны при типизации `AppConfig`, поскольку вы перезапишете типы, которые Nuxt выводит из вашей фактически определённой конфигурации приложения.
::

```ts [index.d.ts]
declare module 'nuxt/schema' {
  interface AppConfig {
    // Это полностью заменит существующее выведенное свойство `theme`
    theme: {
      // Вы можете захотеть типизировать это значение, чтобы добавить более специфичные типы, чем может вывести Nuxt,
      // например, строковые литеральные типы
      primaryColor?: 'red' | 'blue'
    }
  }
}

// Всегда важно убедиться, что вы импортируете/экспортируете что-то при расширении типа
export {}
```

## Стратегия слияния

Nuxt использует пользовательскую стратегию слияния для `AppConfig` внутри [слоев](/docs/getting-started/layers) вашего приложения.

Эта стратегия реализована с использованием [Function Merger](https://github.com/unjs/defu#function-merger), который позволяет определить пользовательскую стратегию слияния для каждого ключа в `app.config`, который имеет массив в качестве значения.

::note
Function merger может использоваться только в расширенных слоях, а не в основном `app.config` проекта.
::

Вот пример того, как вы можете использовать:

::code-group

```ts twoslash [layer/app.config.ts]
export default defineAppConfig({
  // Значение массива по умолчанию
  array: ['hello'],
})
```

```ts twoslash [app.config.ts]
export default defineAppConfig({
  // Перезаписать значение массива по умолчанию, используя функцию слияния
  array: () => ['bonjour'],
})
```

::

## Известные ограничения

Начиная с Nuxt v3.3, файл `app.config.ts` используется совместно с Nitro, что приводит к следующим ограничениям:

1. Вы не можете импортировать Vue компоненты напрямую в `app.config.ts`.
2. Некоторые автоимпорты недоступны в контексте Nitro.

Эти ограничения возникают потому, что Nitro обрабатывает конфигурацию приложения без полной поддержки Vue компонентов.

Хотя можно использовать плагины Vite в конфигурации Nitro в качестве обходного решения, этот подход не рекомендуется:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  nitro: {
    vite: {
      plugins: [vue()]
    }
  }
})
```

::warning
Использование этого обходного решения может привести к неожиданному поведению и ошибкам. Плагин Vue — один из многих, которые недоступны в контексте Nitro.
::

Связанные проблемы:
- [Issue #19858](https://github.com/nuxt/nuxt/issues/19858)
- [Issue #19854](https://github.com/nuxt/nuxt/issues/19854)

::note
Nitro v3 решит эти ограничения, убрав поддержку конфигурации приложения.
Вы можете отслеживать прогресс в [этом pull request](https://github.com/nitrojs/nitro/pull/2521).
::