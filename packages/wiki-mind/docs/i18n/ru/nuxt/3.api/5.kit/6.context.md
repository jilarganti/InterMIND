---
title: "Контекст"
description: Nuxt Kit предоставляет набор утилит для работы с контекстом.
links:
  - label: Source
    icon: i-simple-icons-github
    to: https://github.com/nuxt/nuxt/blob/main/packages/kit/src/context.ts
    size: xs
---

Модули Nuxt позволяют расширить возможности Nuxt. Они предлагают структурированный способ поддержания организованности и модульности вашего кода. Если вы хотите разбить свой модуль на более мелкие компоненты, Nuxt предлагает функции `useNuxt` и `tryUseNuxt`. Эти функции позволяют удобно получить доступ к экземпляру Nuxt из контекста без необходимости передавать его в качестве аргумента.

::note
Когда вы работаете с функцией `setup` в модулях Nuxt, Nuxt уже предоставляется в качестве второго аргумента. Это означает, что вы можете получить к нему доступ напрямую без необходимости вызывать `useNuxt()`.
::

## `useNuxt`

Получить экземпляр Nuxt из контекста. Выбросит ошибку, если Nuxt недоступен.

### Использование

```ts
import { useNuxt } from '@nuxt/kit'

const setupSomeFeature = () => {
  const nuxt = useNuxt()

  // Теперь вы можете использовать экземпляр nuxt
  console.log(nuxt.options)
}
```

### Тип

```ts twoslash
// @errors: 2391
import type { Nuxt } from '@nuxt/schema'
// ---cut---
function useNuxt(): Nuxt
```

### Возвращаемое значение

Функция `useNuxt` возвращает экземпляр Nuxt, который содержит все опции и методы, доступные в Nuxt.

| Свойство   | Тип                                                                       | Описание                                                                                                  |
| ---------- | ------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| `options`  | `NuxtOptions`                                                             | Разрешенная конфигурация Nuxt.                                                                           |
| `hooks`    | `Hookable<NuxtHooks>`                                                     | Система хуков Nuxt. Позволяет регистрировать и прослушивать события жизненного цикла.                   |
| `hook`     | `(name: string, (...args: any[]) => Promise<void> \| void) => () => void` | Сокращение для `nuxt.hooks.hook`. Регистрирует один колбэк для определенного хука жизненного цикла.     |
| `callHook` | `(name: string, ...args: any[]) => Promise<any>`                          | Сокращение для `nuxt.hooks.callHook`. Запускает хук жизненного цикла вручную и выполняет все зарегистрированные колбэки. |
| `addHooks` | `(configHooks: NestedHooks) => () => void`                                | Сокращение для `nuxt.hooks.addHooks`. Регистрирует несколько хуков одновременно.                        |

### Примеры

::code-group

```ts twoslash [setupTranspilation.ts]
import { useNuxt } from '@nuxt/kit'

export const setupTranspilation = () => {
  const nuxt = useNuxt()

  if (nuxt.options.builder === '@nuxt/webpack-builder') {
    nuxt.options.build.transpile ||= []
    nuxt.options.build.transpile.push('xstate')
  }
}
```

```ts twoslash [module.ts]
// @module: esnext
// @filename: setupTranspilation.ts
export const setupTranspilation = () => {}
// @filename: module.ts
import { defineNuxtModule } from '@nuxt/kit'
// ---cut---
import { setupTranspilation } from './setupTranspilation'

export default defineNuxtModule({
  setup () {
    setupTranspilation()
  },
})
```

::

## `tryUseNuxt`

Получить экземпляр Nuxt из контекста. Вернет `null`, если Nuxt недоступен.

### Использование

```ts twoslash
import { tryUseNuxt } from '@nuxt/kit'

function setupSomething () {
  const nuxt = tryUseNuxt()

  if (nuxt) {
    // Теперь вы можете использовать экземпляр nuxt
    console.log(nuxt.options)
  } else {
    console.log('Nuxt недоступен')
  }
}
```

### Тип

```ts twoslash
// @errors: 2391
import type { Nuxt } from '@nuxt/schema'
// ---cut---
function tryUseNuxt(): Nuxt | null
```

### Возвращаемое значение

Функция `tryUseNuxt` возвращает экземпляр Nuxt, если он доступен, или `null`, если Nuxt недоступен.

Экземпляр Nuxt, как описано в разделе `useNuxt`.

### Примеры

::code-group

```ts twoslash [requireSiteConfig.ts]
declare module 'nuxt/schema' {
  interface NuxtOptions {
    siteConfig: SiteConfig
  }
}
// ---cut---
import { tryUseNuxt } from '@nuxt/kit'

interface SiteConfig {
  title?: string
}

export const requireSiteConfig = (): SiteConfig => {
  const nuxt = tryUseNuxt()
  if (!nuxt) {
    return {}
  }
  return nuxt.options.siteConfig
}
```

```ts twoslash [module.ts]
// @module: esnext
// @filename: requireSiteConfig.ts
interface SiteConfig {
  title?: string
}
export const requireSiteConfig = (): SiteConfig => {
 return {}
}
// @filename: module.ts
// ---cut---
import { defineNuxtModule, useNuxt } from '@nuxt/kit'
import { requireSiteConfig } from './requireSiteConfig'

export default defineNuxtModule({
  setup (_, nuxt) {
    const config = requireSiteConfig()
    nuxt.options.app.head.title = config.title
  },
})
```

::