---
title: "Разрешение путей"
description: "Nuxt Kit предоставляет набор утилит для разрешения путей. Эти функции позволяют разрешать пути относительно текущего модуля с неизвестным именем или расширением."
links:
  - label: Source
    icon: i-simple-icons-github
    to: https://github.com/nuxt/nuxt/blob/main/packages/kit/src/resolve.ts
    size: xs
---

Иногда вам нужно разрешить пути: относительно текущего модуля, с неизвестным именем или расширением. Например, вы можете захотеть добавить плагин, который находится в той же директории, что и модуль. Для обработки таких случаев nuxt предоставляет набор утилит для разрешения путей. `resolvePath` и `resolveAlias` используются для разрешения путей относительно текущего модуля. `findPath` используется для поиска первого существующего файла в заданных путях. `createResolver` используется для создания резолвера относительно базового пути.

## `resolvePath`

Разрешает полный путь к файлу или директории с учетом псевдонимов Nuxt и параметров расширений. Если путь не может быть разрешен, будет возвращен нормализованный входной путь.

### Использование

```ts
import { defineNuxtModule, resolvePath } from '@nuxt/kit'

export default defineNuxtModule({
  async setup () {
    const entrypoint = await resolvePath('@unhead/vue')
    console.log(`Unhead entrypoint is ${entrypoint}`)
  },
})
```

### Тип

```ts
function resolvePath (path: string, options?: ResolvePathOptions): Promise<string>
```

### Параметры

**`path`**: Путь для разрешения.

**`options`**: Параметры для передачи в резолвер. Этот объект может иметь следующие свойства:

| Свойство             | Тип                                 | Обязательно | Описание                                                                                                                     |
| -------------------- | ----------------------------------- | ----------- | ---------------------------------------------------------------------------------------------------------------------------- |
| `cwd`                | `string`                            | `false`     | База для разрешения путей. По умолчанию это Nuxt rootDir.                                                                   |
| `alias`              | `Record<string, string>`{lang="ts"} | `false`     | Объект псевдонимов. По умолчанию используются настроенные псевдонимы Nuxt.                                                  |
| `extensions`         | `string[]`                          | `false`     | Расширения файлов для попытки. По умолчанию используются настроенные расширения Nuxt.                                       |
| `virtual`            | `boolean`                           | `false`     | Разрешать ли файлы, которые существуют в Nuxt VFS (например, как шаблон Nuxt).                                              |
| `fallbackToOriginal` | `boolean`                           | `false`     | Возвращаться ли к исходному пути, если разрешенный путь не существует, вместо возврата нормализованного входного пути.      |

### Примеры

```ts
import { defineNuxtModule, resolvePath } from '@nuxt/kit'
import { join } from 'pathe'

const headlessComponents: ComponentGroup[] = [
  {
    relativePath: 'combobox/combobox.js',
    chunkName: 'headlessui/combobox',
    exports: [
      'Combobox',
      'ComboboxLabel',
      'ComboboxButton',
      'ComboboxInput',
      'ComboboxOptions',
      'ComboboxOption',
    ],
  },
]

export default defineNuxtModule({
  meta: {
    name: 'nuxt-headlessui',
    configKey: 'headlessui',
  },
  defaults: {
    prefix: 'Headless',
  },
  async setup (options) {
    const entrypoint = await resolvePath('@headlessui/vue')
    const root = join(entrypoint, '../components')

    for (const group of headlessComponents) {
      for (const e of group.exports) {
        addComponent(
          {
            name: e,
            export: e,
            filePath: join(root, group.relativePath),
            chunkName: group.chunkName,
            mode: 'all',
          },
        )
      }
    }
  },
})
```

## `resolveAlias`

Разрешает псевдонимы путей с учетом настроек псевдонимов Nuxt.

### Тип
  
```ts
function resolveAlias (path: string, alias?: Record<string, string>): string
```

### Параметры

**`path`**: Путь для разрешения.

**`alias`**: Объект псевдонимов. Если не предоставлен, будет прочитан из `nuxt.options.alias`.

## `findPath`

Попытаться разрешить первый существующий файл в заданных путях.

### Использование

```ts
import { defineNuxtModule, findPath } from '@nuxt/kit'
import { join } from 'pathe'

export default defineNuxtModule({
  async setup (_, nuxt) {
    // Разрешить основной компонент (app.vue)
    const mainComponent = await findPath([
      join(nuxt.options.srcDir, 'App'),
      join(nuxt.options.srcDir, 'app'),
    ])
  },
})
```

### Тип

```ts
function findPath (paths: string | string[], options?: ResolvePathOptions, pathType: 'file' | 'dir'): Promise<string | null>
```

### Параметры

**`paths`**: Путь или массив путей для разрешения.

**`options`**: Опции для передачи в резолвер. Этот объект может иметь следующие свойства:

| Свойство             | Тип                                 | Обязательно | Описание                                                                                                                     |
| -------------------- | ----------------------------------- | ----------- | ---------------------------------------------------------------------------------------------------------------------------- |
| `cwd`                | `string`                            | `false`     | База для разрешения путей. По умолчанию это Nuxt rootDir.                                                                   |
| `alias`              | `Record<string, string>`{lang="ts"} | `false`     | Объект псевдонимов. По умолчанию это настроенные псевдонимы Nuxt.                                                           |
| `extensions`         | `string[]`                          | `false`     | Расширения файлов для попытки. По умолчанию это настроенные расширения Nuxt.                                                |
| `virtual`            | `boolean`                           | `false`     | Разрешать ли файлы, которые существуют в Nuxt VFS (например, как шаблон Nuxt).                                              |
| `fallbackToOriginal` | `boolean`                           | `false`     | Возвращаться ли к исходному пути, если разрешенный путь не существует, вместо возврата нормализованного входного пути.      |

## `createResolver`

Создает резолвер относительно базового пути.

::tip{icon="i-lucide-video" to="https://vueschool.io/lessons/resolving-paths-and-injecting-assets-to-the-app?friend=nuxt" target="_blank"}
Посмотрите видео Vue School о createResolver.
::

### Использование

```ts
import { defineNuxtModule, createResolver } from '@nuxt/kit'

export default defineNuxtModule({
  async setup (_, nuxt) {
    const { resolve, resolvePath } = createResolver(import.meta.url)
  },
})
```

### Тип

```ts
function createResolver (basePath: string | URL): Resolver
```

### Параметры

**`basePath`**: Базовый путь для разрешения. Может быть строкой или URL.

### Возвращаемое значение

Функция `createResolver` возвращает объект со следующими свойствами:

| Свойство      | Тип                                                                         | Описание                                                                                               |
| ------------- | ---------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| `resolve`     | `(path: string) => string`{lang="ts"}                                        | Функция, которая разрешает путь относительно базового пути.                                                |
| `resolvePath` | `(path: string, options?: ResolvePathOptions) => Promise<string>`{lang="ts"} | Функция, которая разрешает путь относительно базового пути и учитывает псевдонимы и параметры расширений Nuxt. |

### Примеры

```ts
import { createResolver, defineNuxtModule, isNuxt2 } from '@nuxt/kit'

export default defineNuxtModule({
  setup (options, nuxt) {
    const resolver = createResolver(import.meta.url)

    nuxt.hook('modules:done', () => {
      if (isNuxt2()) {
        addPlugin(resolver.resolve('./runtime/plugin.vue2'))
      } else {
        addPlugin(resolver.resolve('./runtime/plugin.vue3'))
      }
    })
  },
})
```