---
title: "Сборщик"
description: "Nuxt Kit предоставляет набор утилит для работы с сборщиком. Эти функции позволяют расширять конфигурации Vite и webpack."
links:
  - label: Source
    icon: i-simple-icons-github
    to: https://github.com/nuxt/nuxt/blob/main/packages/kit/src/build.ts
    size: xs
---

Nuxt имеет сборщики на основе [Vite](https://github.com/nuxt/nuxt/tree/main/packages/vite) и [webpack](https://github.com/nuxt/nuxt/tree/main/packages/webpack). Вы можете расширить конфигурацию, передаваемую каждому из них, используя функции `extendViteConfig` и `extendWebpackConfig`. Вы также можете добавить дополнительные плагины через `addVitePlugin`, `addWebpackPlugin` и `addBuildPlugin`.

## `extendViteConfig`

Расширяет конфигурацию Vite. Функция обратного вызова может быть вызвана несколько раз при применении как к клиентским, так и к серверным сборкам.

### Использование

```ts twoslash
import { defineNuxtModule, extendViteConfig } from '@nuxt/kit'

export default defineNuxtModule({
  setup () {
    extendViteConfig((config) => {
      config.optimizeDeps ||= {}
      config.optimizeDeps.include ||= []
      config.optimizeDeps.include.push('cross-fetch')
    })
  },
})
```

### Тип

```ts twoslash
// @errors: 2391
import type { UserConfig as ViteConfig } from 'vite'
import type { ExtendViteConfigOptions } from '@nuxt/kit'
// ---cut---
function extendViteConfig (callback: ((config: ViteConfig) => void), options?: ExtendViteConfigOptions): void
```

::read-more{to="https://vite.dev/config" target="_blank" icon="i-simple-icons-vite"}
Посетите веб-сайт Vite для получения дополнительной информации о его конфигурации.
::

### Параметры

**`callback`**: Функция обратного вызова, которая будет вызвана с объектом конфигурации Vite.

**`options`**: Опции для передачи в функцию обратного вызова. Этот объект может иметь следующие свойства:

| Свойство  | Тип       | Обязательно | Описание                                                                                                      |
| --------- | --------- | ----------- | ------------------------------------------------------------------------------------------------------------- |
| `dev`     | `boolean` | `false`     | Если установлено в `true`, функция обратного вызова будет вызвана при сборке в режиме разработки.            |
| `build`   | `boolean` | `false`     | Если установлено в `true`, функция обратного вызова будет вызвана при сборке в производственном режиме.       |
| `server`  | `boolean` | `false`     | Если установлено в `true`, функция обратного вызова будет вызвана при сборке серверного пакета.               |
| `client`  | `boolean` | `false`     | Если установлено в `true`, функция обратного вызова будет вызвана при сборке клиентского пакета.              |
| `prepend` | `boolean` | `false`     | Если установлено в `true`, функция обратного вызова будет добавлена в начало массива с помощью `unshift()` вместо `push()`. |

## `extendWebpackConfig`

Расширяет конфигурацию webpack. Функция обратного вызова может быть вызвана несколько раз при применении к сборкам клиента и сервера.

### Использование

```ts twoslash
import { defineNuxtModule, extendWebpackConfig } from '@nuxt/kit'

export default defineNuxtModule({
  setup () {
    extendWebpackConfig((config) => {
      config.module!.rules!.push({
        test: /\.txt$/,
        use: 'raw-loader',
      })
    })
  },
})
```

### Тип

```ts twoslash
// @errors: 2391
import type { Configuration as WebpackConfig } from 'webpack'
import type { ExtendWebpackConfigOptions } from '@nuxt/kit'
// ---cut---
function extendWebpackConfig (callback: ((config: WebpackConfig) => void), options?: ExtendWebpackConfigOptions): void
```

::read-more{to="https://webpack.js.org/configuration" target="_blank" icon="i-simple-icons-webpack"}
Посетите веб-сайт webpack для получения дополнительной информации о его конфигурации.
::

### Параметры

**`callback`**: Функция обратного вызова, которая будет вызвана с объектом конфигурации webpack.

**`options`**: Опции для передачи в функцию обратного вызова. Этот объект может иметь следующие свойства:

| Свойство  | Тип       | Обязательно | Описание                                                                                                     |
| --------- | --------- | ----------- | ------------------------------------------------------------------------------------------------------------ |
| `dev`     | `boolean` | `false`     | Если установлено в `true`, функция обратного вызова будет вызвана при сборке в режиме разработки.           |
| `build`   | `boolean` | `false`     | Если установлено в `true`, функция обратного вызова будет вызвана при сборке в производственном режиме.      |
| `server`  | `boolean` | `false`     | Если установлено в `true`, функция обратного вызова будет вызвана при сборке серверного пакета.              |
| `client`  | `boolean` | `false`     | Если установлено в `true`, функция обратного вызова будет вызвана при сборке клиентского пакета.             |
| `prepend` | `boolean` | `false`     | Если установлено в `true`, функция обратного вызова будет добавлена в начало массива с помощью `unshift()` вместо `push()`. |

## `addVitePlugin`

Добавить Vite плагин в конфигурацию.

### Использование

```ts twoslash
// @errors: 2307
// ---cut---
import { addVitePlugin, defineNuxtModule } from '@nuxt/kit'
import { svg4VuePlugin } from 'vite-plugin-svg4vue'

export default defineNuxtModule({
  meta: {
    name: 'nuxt-svg-icons',
    configKey: 'nuxtSvgIcons',
  },
  defaults: {
    svg4vue: {
      assetsDirName: 'assets/icons',
    },
  },
  setup (options) {
    addVitePlugin(svg4VuePlugin(options.svg4vue))
  },
})
```

### Тип

```ts twoslash
// @errors: 2391
import type { Plugin as VitePlugin } from 'vite'
import type { ExtendViteConfigOptions } from '@nuxt/kit'
// ---cut---
function addVitePlugin (pluginOrGetter: VitePlugin | VitePlugin[] | (() => VitePlugin | VitePlugin[]), options?: ExtendViteConfigOptions): void
```

::tip
Смотрите [сайт Vite](https://vite.dev/guide/api-plugin.html) для получения дополнительной информации о Vite плагинах. Вы также можете использовать [этот репозиторий](https://github.com/vitejs/awesome-vite#plugins) для поиска плагина, который соответствует вашим потребностям.
::

### Параметры

**`pluginOrGetter`**: Экземпляр Vite плагина или массив экземпляров Vite плагинов. Если предоставлена функция, она должна возвращать экземпляр Vite плагина или массив экземпляров Vite плагинов.

**`options`**: Опции для передачи в callback функцию. Этот объект может иметь следующие свойства:

| Свойство  | Тип       | Обязательно | Описание                                                                                                      |
| --------- | --------- | ----------- | ------------------------------------------------------------------------------------------------------------- |
| `dev`     | `boolean` | `false`     | Если установлено в `true`, callback функция будет вызвана при сборке в режиме разработки.                    |
| `build`   | `boolean` | `false`     | Если установлено в `true`, callback функция будет вызвана при сборке в продакшн режиме.                      |
| `server`  | `boolean` | `false`     | Если установлено в `true`, callback функция будет вызвана при сборке серверного бандла.                      |
| `client`  | `boolean` | `false`     | Если установлено в `true`, callback функция будет вызвана при сборке клиентского бандла.                     |
| `prepend` | `boolean` | `false`     | Если установлено в `true`, callback функция будет добавлена в начало массива с помощью `unshift()` вместо `push()`. |

## `addWebpackPlugin`

Добавить webpack плагин в конфигурацию.

### Использование

```ts
import EslintWebpackPlugin from 'eslint-webpack-plugin'
import { addWebpackPlugin, defineNuxtModule } from '@nuxt/kit'

export default defineNuxtModule({
  meta: {
    name: 'nuxt-eslint',
    configKey: 'eslint',
  },
  defaults: nuxt => ({
    include: [`${nuxt.options.srcDir}/**/*.{js,jsx,ts,tsx,vue}`],
    lintOnStart: true,
  }),
  setup (options, nuxt) {
    const webpackOptions = {
      ...options,
      context: nuxt.options.srcDir,
      files: options.include,
      lintDirtyModulesOnly: !options.lintOnStart,
    }
    addWebpackPlugin(new EslintWebpackPlugin(webpackOptions), { server: false })
  },
})
```

### Тип

```ts twoslash
// @errors: 2391
import type { WebpackPluginInstance } from 'webpack'
import type { ExtendWebpackConfigOptions } from '@nuxt/kit'
// ---cut---
function addWebpackPlugin (pluginOrGetter: WebpackPluginInstance | WebpackPluginInstance[] | (() => WebpackPluginInstance | WebpackPluginInstance[]), options?: ExtendWebpackConfigOptions): void
```

::tip
Смотрите [сайт webpack](https://webpack.js.org/concepts/plugins) для получения дополнительной информации о webpack плагинах. Вы также можете использовать [эту коллекцию](https://webpack.js.org/awesome-webpack/#webpack-plugins), чтобы найти плагин, который соответствует вашим потребностям.
::

### Параметры

**`pluginOrGetter`**: Экземпляр webpack плагина или массив экземпляров webpack плагинов. Если предоставлена функция, она должна возвращать экземпляр webpack плагина или массив экземпляров webpack плагинов.

**`options`**: Опции для передачи в callback функцию. Этот объект может иметь следующие свойства:

| Свойство  | Тип       | Обязательно | Описание                                                                                                      |
| --------- | --------- | ----------- | ------------------------------------------------------------------------------------------------------------- |
| `dev`     | `boolean` | `false`     | Если установлено в `true`, callback функция будет вызвана при сборке в режиме разработки.                    |
| `build`   | `boolean` | `false`     | Если установлено в `true`, callback функция будет вызвана при сборке в продакшн режиме.                      |
| `server`  | `boolean` | `false`     | Если установлено в `true`, callback функция будет вызвана при сборке серверного бандла.                      |
| `client`  | `boolean` | `false`     | Если установлено в `true`, callback функция будет вызвана при сборке клиентского бандла.                     |
| `prepend` | `boolean` | `false`     | Если установлено в `true`, callback функция будет добавлена в начало массива с помощью `unshift()` вместо `push()`. |

## `addBuildPlugin`

Универсальная версия `addVitePlugin` и `addWebpackPlugin`, не зависящая от сборщика. Добавляет плагин в конфигурации как Vite, так и webpack, если они присутствуют.

### Тип

```ts twoslash
// @errors: 2391
import type { ExtendConfigOptions } from '@nuxt/kit'
import type { Plugin as VitePlugin } from 'vite'
import type { WebpackPluginInstance } from 'webpack'
import type { RspackPluginInstance } from '@rspack/core'
interface AddBuildPluginFactory {
  vite?: () => VitePlugin | VitePlugin[]
  webpack?: () => WebpackPluginInstance | WebpackPluginInstance[]
  rspack?: () => RspackPluginInstance | RspackPluginInstance[]
}
// ---cut---
function addBuildPlugin (pluginFactory: AddBuildPluginFactory, options?: ExtendConfigOptions): void
```

### Параметры

**`pluginFactory`**: Фабричная функция, которая возвращает объект со свойствами `vite` и/или `webpack`. Эти свойства должны быть функциями, которые возвращают экземпляр плагина Vite или массив экземпляров плагинов Vite и/или экземпляр плагина webpack или массив экземпляров плагинов webpack.

**`options`**: Опции для передачи в callback-функцию. Этот объект может содержать следующие свойства:

| Свойство  | Тип       | Обязательно | Описание                                                                                                      |
| --------- | --------- | ----------- | ------------------------------------------------------------------------------------------------------------- |
| `dev`     | `boolean` | `false`     | Если установлено в `true`, callback-функция будет вызвана при сборке в режиме разработки.                    |
| `build`   | `boolean` | `false`     | Если установлено в `true`, callback-функция будет вызвана при сборке в продакшн режиме.                      |
| `server`  | `boolean` | `false`     | Если установлено в `true`, callback-функция будет вызвана при сборке серверного бандла.                      |
| `client`  | `boolean` | `false`     | Если установлено в `true`, callback-функция будет вызвана при сборке клиентского бандла.                     |
| `prepend` | `boolean` | `false`     | Если установлено в `true`, callback-функция будет добавлена в начало массива с помощью `unshift()` вместо `push()`. |