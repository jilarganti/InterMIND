---
title: "Страницы"
description: "Nuxt Kit предоставляет набор утилит для создания и использования страниц. Вы можете использовать эти утилиты для управления конфигурацией страниц или определения правил маршрутизации."
links:
  - label: Source
    icon: i-simple-icons-github
    to: https://github.com/nuxt/nuxt/blob/main/packages/kit/src/pages.ts
    size: xs
---

## `extendPages`

В Nuxt маршруты автоматически генерируются на основе структуры файлов в директории `pages`. Однако могут возникнуть сценарии, когда вы захотите настроить эти маршруты. Например, вам может потребоваться добавить маршрут для динамической страницы, не сгенерированной Nuxt, удалить существующий маршрут или изменить конфигурацию маршрута. Для таких настроек Nuxt предлагает функцию `extendPages`, которая позволяет расширять и изменять конфигурацию страниц.

::tip{icon="i-lucide-video" to="https://vueschool.io/lessons/extend-and-alter-nuxt-pages?friend=nuxt" target="_blank"}
Посмотрите видео Vue School о extendPages.
::

### Использование

```ts twoslash
import { createResolver, defineNuxtModule, extendPages } from '@nuxt/kit'

export default defineNuxtModule({
  setup (options) {
    const { resolve } = createResolver(import.meta.url)

    extendPages((pages) => {
      pages.unshift({
        name: 'prismic-preview',
        path: '/preview',
        file: resolve('runtime/preview.vue'),
      })
    })
  },
})
```

### Тип

```ts
function extendPages(callback: (pages: NuxtPage[]) => void): void
```

### Параметры

**callback**: Функция, которая будет вызвана с конфигурацией страниц. Вы можете изменить этот массив, добавляя, удаляя или модифицируя его элементы. Примечание: Вы должны изменять предоставленный массив страниц напрямую, поскольку изменения, внесенные в скопированный массив, не будут отражены в конфигурации.

| Свойство   | Тип                               | Обязательно | Описание                                                                                  |
| ---------- | ---------------------------------- | -------- | -------------------------------------------------------------------------------------------- |
| `name`     | `string`                           | `false`  | Имя маршрута. Полезно для программной навигации и идентификации маршрутов.            |
| `path`     | `string`                           | `false`  | URL-путь маршрута. Если не задан, Nuxt выведет его из расположения файла.                   |
| `file`     | `string`                           | `false`  | Путь к Vue-файлу, который должен использоваться как компонент для маршрута.                     |
| `meta`     | `Record<string, any>`{lang="ts"}   | `false`  | Пользовательские метаданные для маршрута. Могут использоваться в макетах, middleware или навигационных guards.    |
| `alias`    | `string[] \| string`{lang="ts"}    | `false`  | Один или несколько псевдонимов путей для маршрута. Полезно для поддержки нескольких URL.                  |
| `redirect` | `RouteLocationRaw`{lang="ts"}      | `false`  | Правило перенаправления для маршрута. Поддерживает именованные маршруты, объекты или строковые пути.                |
| `children` | `NuxtPage[]`{lang="ts"}            | `false`  | Вложенные дочерние маршруты под этим маршрутом для вложения макетов или представлений.                             |

## `extendRouteRules`

Nuxt работает на серверном движке [Nitro](https://nitro.build/). С Nitro вы можете включать высокоуровневую логику непосредственно в вашу конфигурацию, что полезно для таких действий, как перенаправления, проксирование, кэширование и добавление заголовков к маршрутам. Эта конфигурация работает путем связывания шаблонов маршрутов с конкретными настройками маршрутов.

::tip
Вы можете узнать больше о правилах маршрутов Nitro в [документации Nitro](https://nitro.build/guide/routing#route-rules).
::

::tip{icon="i-lucide-video" to="https://vueschool.io/lessons/adding-route-rules-and-route-middlewares?friend=nuxt" target="_blank"}
Посмотрите видео Vue School о добавлении правил маршрутов и промежуточного ПО маршрутов.
::

### Использование

```ts twoslash
import { createResolver, defineNuxtModule, extendPages, extendRouteRules } from '@nuxt/kit'

export default defineNuxtModule({
  setup (options) {
    const { resolve } = createResolver(import.meta.url)

    extendPages((pages) => {
      pages.unshift({
        name: 'preview-new',
        path: '/preview-new',
        file: resolve('runtime/preview.vue'),
      })
    })

    extendRouteRules('/preview', {
      redirect: {
        to: '/preview-new',
        statusCode: 302,
      },
    })

    extendRouteRules('/preview-new', {
      cache: {
        maxAge: 60 * 60 * 24 * 7,
      },
    })
  },
})
```

### Тип

```ts
function extendRouteRules(route: string, rule: NitroRouteConfig, options?: ExtendRouteRulesOptions): void
```

### Параметры

**route**: Шаблон маршрута для сопоставления.\
**rule**: Конфигурация правила маршрута для применения к соответствующему маршруту.

::tip
О конфигурациях правил маршрутов вы можете получить более подробную информацию в разделе [Гибридный рендеринг > Правила маршрутов](/docs/guide/concepts/rendering#route-rules).
::

**options**: Объект для передачи в конфигурацию маршрута. Если `override` установлен в `true`, он переопределит существующую конфигурацию маршрута.

| Название   | Тип       | По умолчанию | Описание                                                    |
| ---------- | --------- | ------------ | ----------------------------------------------------------- |
| `override` | `boolean` | `false`      | Переопределить конфигурацию правила маршрута, по умолчанию false |

## `addRouteMiddleware`

Регистрирует промежуточное ПО маршрутов, которое будет доступно для всех маршрутов или для конкретных маршрутов.

Промежуточное ПО маршрутов также может быть определено в плагинах через композабл [`addRouteMiddleware`](/docs/api/utils/add-route-middleware).

::tip
Узнайте больше о промежуточном ПО маршрутов в [документации по промежуточному ПО маршрутов](/docs/getting-started/routing#route-middleware).
::

::tip{icon="i-lucide-video" to="https://vueschool.io/lessons/adding-route-rules-and-route-middlewares?friend=nuxt" target="_blank"}
Посмотрите видео Vue School о добавлении правил маршрутов и промежуточного ПО маршрутов.
::

### Использование

::code-group

```ts twoslash [module.ts]
import { addRouteMiddleware, createResolver, defineNuxtModule } from '@nuxt/kit'

export default defineNuxtModule({
  setup () {
    const { resolve } = createResolver(import.meta.url)

    addRouteMiddleware({
      name: 'auth',
      path: resolve('runtime/auth'),
      global: true,
    }, { prepend: true })
  },
})
```

```ts twoslash [runtime/auth.ts]
function isAuthenticated(): boolean { return false }
// ---cut---
export default defineNuxtRouteMiddleware((to, from) => {
  // isAuthenticated() - это пример метода, проверяющего, аутентифицирован ли пользователь
  if (to.path !== '/login' && isAuthenticated() === false) {
    return navigateTo('/login')
  }
})
```

::

### Тип

```ts
function addRouteMiddleware(input: NuxtMiddleware | NuxtMiddleware[], options?: AddRouteMiddlewareOptions): void
```

### Параметры

**input**: Объект промежуточного ПО или массив объектов промежуточного ПО со следующими свойствами:

| Свойство | Тип       | Обязательно | Описание                                                      |
| -------- | --------- | ----------- | ------------------------------------------------------------- |
| `name`   | `string`  | `true`      | Имя промежуточного ПО.                                        |
| `path`   | `string`  | `true`      | Путь к файлу промежуточного ПО.                               |
| `global` | `boolean` | `false`     | Если установлено в `true`, применяет промежуточное ПО ко всем маршрутам. |

**options**: Объект со следующими свойствами:

| Свойство   | Тип       | По умолчанию | Описание                                                           |
| ---------- | --------- | ------------ | ------------------------------------------------------------------ |
| `override` | `boolean` | `false`      | Если `true`, заменяет промежуточное ПО с тем же именем.            |
| `prepend`  | `boolean` | `false`      | Если `true`, добавляет промежуточное ПО перед существующими промежуточными ПО. |