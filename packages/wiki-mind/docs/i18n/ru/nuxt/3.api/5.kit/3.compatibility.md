---
title: "Совместимость"
description: "Nuxt Kit предоставляет набор утилит для проверки совместимости ваших модулей с различными версиями Nuxt."
links:
  - label: Source
    icon: i-simple-icons-github
    to: https://github.com/nuxt/nuxt/blob/main/packages/kit/src/compatibility.ts
    size: xs
---

Утилиты Nuxt Kit могут использоваться в Nuxt 3, Nuxt 2 с Bridge и даже в Nuxt 2 без Bridge. Чтобы убедиться, что ваш модуль совместим со всеми версиями, вы можете использовать функции `checkNuxtCompatibility`, `assertNuxtCompatibility` и `hasNuxtCompatibility`. Они проверят, соответствует ли текущая версия Nuxt указанным вами ограничениям. Также вы можете использовать функции `isNuxt2`, `isNuxt3` и `getNuxtVersion` для более детальных проверок.

## `checkNuxtCompatibility`

Проверяет, выполняются ли ограничения для текущей версии Nuxt. Если нет, возвращает массив сообщений. Версия Nuxt 2 также проверяет поддержку `bridge`.

### Использование

```ts twoslash
import { defineNuxtModule, checkNuxtCompatibility } from '@nuxt/kit'

export default defineNuxtModule({
  async setup (_options, nuxt) {
    const issues = await checkNuxtCompatibility({ nuxt: '^2.16.0' }, nuxt)
    if (issues.length) {
      console.warn('Найдены проблемы совместимости с Nuxt:\n' + issues.toString())
    } else {
      // делаем что-то
    }
  }
})
```

### Тип

```ts
function checkNuxtCompatibility(constraints: NuxtCompatibility, nuxt?: Nuxt): Promise<NuxtCompatibilityIssues>;
```

### Параметры

**`constraints`**: Ограничения версии и сборщика для проверки. Принимает следующие свойства:

| Свойство | Тип                                           | Обязательно | Описание                                                                                                                                         |
| -------- | --------------------------------------------- | ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| `nuxt`   | `string`                                      | `false`     | Версия Nuxt в формате semver. Версии могут быть определены в стиле Node.js, например: `>=2.15.0 <3.0.0`.                                      |
| `bridge` | `Record<string, string \| false>`{lang="ts"} | `false`     | Указывает ограничения версии или отключает совместимость для конкретных сборщиков Nuxt, таких как `vite`, `webpack` или `rspack`. Используйте `false` для отключения. |

**`nuxt`**: Экземпляр Nuxt. Если не предоставлен, будет получен из контекста через вызов `useNuxt()`.

## `assertNuxtCompatibility`

Проверяет, что ограничения соблюдены для текущей версии Nuxt. Если нет, выбрасывает ошибку со списком проблем в виде строки.

### Тип

```ts twoslash
// @errors: 2391
import type { Nuxt, NuxtCompatibility } from '@nuxt/schema'
// ---cut---
function assertNuxtCompatibility(constraints: NuxtCompatibility, nuxt?: Nuxt): Promise<true>;
```

### Параметры

**`constraints`**: Ограничения версии и сборщика для проверки. Обратитесь к [таблице ограничений в `checkNuxtCompatibility`](#parameters) для получения подробностей.

**`nuxt`**: Экземпляр Nuxt. Если не предоставлен, будет получен из контекста через вызов `useNuxt()`.

## `hasNuxtCompatibility`

Проверяет, выполняются ли ограничения для текущей версии Nuxt. Возвращает `true`, если все ограничения выполнены, иначе возвращает `false`. Версия Nuxt 2 также проверяет поддержку `bridge`.

### Использование

```ts twoslash
import { defineNuxtModule, hasNuxtCompatibility } from '@nuxt/kit'

export default defineNuxtModule({
  async setup (_options, nuxt) {
    const usingNewPostcss = await hasNuxtCompatibility({ nuxt: '^2.16.0' }, nuxt)
    if (usingNewPostcss) {
      // сделать что-то
    } else {
      // сделать что-то другое
    }
  }
})
```

### Тип

```ts
function hasNuxtCompatibility(constraints: NuxtCompatibility, nuxt?: Nuxt): Promise<boolean>;
```

### Параметры

**`constraints`**: Ограничения версии и сборщика для проверки. Обратитесь к [таблице ограничений в `checkNuxtCompatibility`](#parameters) для получения подробностей.

**`nuxt`**: Экземпляр Nuxt. Если не предоставлен, он будет получен из контекста через вызов `useNuxt()`.

## `isNuxtMajorVersion`

Проверить, является ли текущий экземпляр Nuxt указанной мажорной версией

### Использование

```ts twoslash
import { defineNuxtModule, isNuxtMajorVersion } from '@nuxt/kit'

export default defineNuxtModule({
  async setup () {
    if (isNuxtMajorVersion(3)) {
      // сделать что-то для Nuxt 3
    } else {
      // сделать что-то другое для других версий
    }
  }
})
```

### Тип

```ts
function isNuxtMajorVersion(major: number, nuxt?: Nuxt): boolean;
```

### Параметры

**`major`**: Мажорная версия для проверки.

**`nuxt`**: Экземпляр Nuxt. Если не предоставлен, он будет получен из контекста через вызов `useNuxt()`.

## `isNuxt3`

Проверяет, является ли текущая версия Nuxt версией 3.x.

::note
Используйте `isNuxtMajorVersion(2, nuxt)` вместо этого. Эта функция может быть удалена в \@nuxt/kit v5 или в будущей мажорной версии.
::

### Тип

```ts
function isNuxt3(nuxt?: Nuxt): boolean;
```

### Параметры

**`nuxt`**: Экземпляр Nuxt. Если не предоставлен, он будет получен из контекста через вызов `useNuxt()`.

## `isNuxt2`

Проверяет, является ли текущая версия Nuxt версией 2.x.

::note
Используйте `isNuxtMajorVersion(2, nuxt)` вместо этого. Эта функция может быть удалена в \@nuxt/kit v5 или в будущей мажорной версии.
::

### Тип

```ts
function isNuxt2(nuxt?: Nuxt): boolean;
```

### Параметры

**`nuxt`**: Экземпляр Nuxt. Если не предоставлен, он будет получен из контекста через вызов `useNuxt()`.

## `getNuxtVersion`

Возвращает текущую версию Nuxt.

### Тип

```ts
function getNuxtVersion(nuxt?: Nuxt): string;
```

### Параметры

**`nuxt`**: Экземпляр Nuxt. Если не предоставлен, он будет получен из контекста через вызов `useNuxt()`.