---
title: "Предварительная отрисовка"
description: Nuxt позволяет статически отрисовывать страницы во время сборки для улучшения производительности и SEO-метрик
navigation.icon: i-lucide-file-code-2
---

Nuxt позволяет выбранным страницам вашего приложения быть отрисованными во время сборки. Nuxt будет обслуживать предварительно собранные страницы при запросе вместо их генерации на лету.

:read-more{title="Режимы отрисовки Nuxt" to="/docs/guide/concepts/rendering"}

## Предварительная отрисовка на основе сканирования

Используйте [`команду nuxt generate`](/docs/api/commands/generate) для сборки и предварительной отрисовки вашего приложения с помощью сканера [Nitro](/docs/guide/concepts/server-engine). Эта команда аналогична `nuxt build` с опцией `nitro.static`, установленной в `true`, или запуску `nuxt build --prerender`.

Это соберет ваш сайт, запустит экземпляр nuxt и по умолчанию предварительно отрисует корневую страницу `/` вместе со всеми страницами вашего сайта, на которые она ссылается, всеми страницами вашего сайта, на которые ссылаются они, и так далее.

::code-group{sync="pm"}

```bash [npm]
npx nuxt generate
```

```bash [yarn]
yarn nuxt generate
```

```bash [pnpm]
pnpm nuxt generate
```

```bash [bun]
bun x nuxt generate
```

::

Теперь вы можете развернуть директорию `.output/public` на любом сервисе статического хостинга или просмотреть ее локально с помощью `npx serve .output/public`.

Принцип работы сканера Nitro:

1. Загружает HTML корневого маршрута вашего приложения (`/`), любые нединамические страницы в вашей директории `~/pages` и любые другие маршруты в массиве `nitro.prerender.routes`.
2. Сохраняет HTML и `payload.json` в директорию `~/.output/public/` для статической подачи.
3. Находит все теги якорей (`<a href="...">`) в HTML для навигации к другим маршрутам.
4. Повторяет шаги 1-3 для каждого найденного тега якоря, пока не останется больше тегов якорей для сканирования.

Важно понимать, что страницы, которые не связаны с обнаруживаемой страницей, не могут быть предварительно отрисованы автоматически.

::read-more{to="/docs/api/commands/generate#nuxt-generate"}
Узнайте больше о команде `nuxt generate`.
::

### Селективная предварительная отрисовка

Вы можете вручную указать маршруты, которые [Nitro](/docs/guide/concepts/server-engine) будет получать и предварительно отрисовывать во время сборки, или игнорировать маршруты, которые вы не хотите предварительно отрисовывать, например `/dynamic` в файле `nuxt.config`:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  nitro: {
    prerender: {
      routes: ["/user/1", "/user/2"],
      ignore: ["/dynamic"],
    },
  },
});
```

Вы можете объединить это с опцией `crawlLinks` для предварительной отрисовки набора маршрутов, которые сканер не может обнаружить, например ваши `/sitemap.xml` или `/robots.txt`:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  nitro: {
    prerender: {
      crawlLinks: true,
      routes: ["/sitemap.xml", "/robots.txt"],
    },
  },
});
```

Установка `nitro.prerender` в `true` аналогична установке `nitro.prerender.crawlLinks` в `true`.

::read-more{to="https://nitro.build/config#prerender"}
Узнайте больше о предварительной отрисовке в документации Nitro.
::

Наконец, вы можете вручную настроить это с помощью routeRules.

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  routeRules: {
    // Установите prerender в true, чтобы настроить его для предварительной отрисовки
    "/rss.xml": { prerender: true },
    // Установите в false, чтобы настроить его пропуск для предварительной отрисовки
    "/this-DOES-NOT-get-prerendered": { prerender: false },
    // Все под /blog получает предварительную отрисовку, пока это
    // связано с другой страницей
    "/blog/**": { prerender: true },
  },
});
```

::read-more{to="https://nitro.build/config#routerules"}
Узнайте больше о конфигурации `routeRules` в Nitro.
::

В качестве сокращения вы также можете настроить это в файле страницы, используя [`defineRouteRules`](/docs/api/utils/define-route-rules).

::read-more{to="/docs/guide/going-further/experimental-features#inlinerouterules" icon="i-lucide-star"}
Эта функция экспериментальная, и для ее использования вы должны включить опцию `experimental.inlineRouteRules` в вашем `nuxt.config`.
::

```vue [pages/index.vue]
<script setup>
// Или установите на уровне страницы
defineRouteRules({
  prerender: true,
});
</script>

<template>
  <div>
    <h1>Главная страница</h1>
    <p>Предварительно отрисована во время сборки</p>
  </div>
</template>
```

Это будет переведено в:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  routeRules: {
    "/": { prerender: true },
  },
});
```

## Конфигурация предварительного рендеринга во время выполнения

### `prerenderRoutes`

Вы можете использовать это во время выполнения в [контексте Nuxt](/docs/guide/going-further/nuxt-app#the-nuxt-context), чтобы добавить больше маршрутов для предварительного рендеринга Nitro.

```vue [pages/index.vue]
<script setup>
prerenderRoutes(["/some/other/url"]);
prerenderRoutes("/api/content/article/my-article");
</script>

<template>
  <div>
    <h1>Это зарегистрирует другие маршруты для предварительного рендеринга при предварительном рендеринге</h1>
  </div>
</template>
```

:read-more{title="prerenderRoutes" to="/docs/api/utils/prerender-routes"}

### Хук Nuxt `prerender:routes`

Это вызывается перед предварительным рендерингом для регистрации дополнительных маршрутов.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  hooks: {
    async "prerender:routes"(ctx) {
      const { pages } = await fetch("https://api.some-cms.com/pages").then(
        (res) => res.json(),
      );
      for (const page of pages) {
        ctx.routes.add(`/${page.name}`);
      }
    },
  },
});
```

### Хук Nitro `prerender:generate`

Это вызывается для каждого маршрута во время предварительного рендеринга. Вы можете использовать это для детального управления каждым маршрутом, который подвергается предварительному рендерингу.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  nitro: {
    hooks: {
      "prerender:generate"(route) {
        if (route.route?.includes("private")) {
          route.skip = true;
        }
      },
    },
  },
});
```