---
title: "Переходы"
description: "Применяйте переходы между страницами и макетами с помощью Vue или нативных браузерных View Transitions."
navigation.icon: i-lucide-toggle-right
---

::note
Nuxt использует компонент Vue [`<Transition>`](https://vuejs.org/guide/built-ins/transition.html#the-transition-component) для применения переходов между страницами и макетами.
::

## Переходы между страницами

Вы можете включить переходы между страницами, чтобы применить автоматический переход для всех ваших [страниц](/docs/guide/directory-structure/pages).

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    pageTransition: { name: 'page', mode: 'out-in' }
  }
})
```

::note
Если вы изменяете макеты, а также страницу, переход страницы, который вы установили здесь, не будет выполняться. Вместо этого вы должны установить [переход макета](/docs/getting-started/transitions#layout-transitions).
::

Чтобы начать добавлять переходы между вашими страницами, добавьте следующий CSS в ваш [`app.vue`](/docs/guide/directory-structure/app):

::code-group

```vue [app.vue]
<template>
  <NuxtPage />
</template>

<style>
.page-enter-active,
.page-leave-active {
  transition: all 0.4s;
}
.page-enter-from,
.page-leave-to {
  opacity: 0;
  filter: blur(1rem);
}
</style>
```

```vue [pages/index.vue]
<template>
  <div>
    <h1>Главная страница</h1>
    <NuxtLink to="/about">Страница о нас</NuxtLink>
  </div>
</template>
```

```vue [pages/about.vue]
<template>
  <div>
    <h1>Страница о нас</h1>
    <NuxtLink to="/">Главная страница</NuxtLink>
  </div>
</template>
```

::

Это дает следующий результат при навигации между страницами:

<video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665061349/nuxt3/nuxt3-page-transitions_umwvmh.jpg">
  <source src="https://res.cloudinary.com/nuxt/video/upload/v1665061349/nuxt3/nuxt3-page-transitions_umwvmh.mp4" type="video/mp4">
</video>

Чтобы установить другой переход для страницы, установите ключ `pageTransition` в [`definePageMeta`](/docs/api/utils/define-page-meta) страницы:

::code-group

```vue twoslash [pages/about.vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: {
    name: 'rotate'
  }
})
</script>
```

```vue [app.vue]
<template>
  <NuxtPage />
</template>

<style>
/* ... */
.rotate-enter-active,
.rotate-leave-active {
  transition: all 0.4s;
}
.rotate-enter-from,
.rotate-leave-to {
  opacity: 0;
  transform: rotate3d(1, 1, 1, 15deg);
}
</style>
```

::

Переход на страницу о нас добавит эффект 3d поворота:

<video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665063233/nuxt3/nuxt3-page-transitions-cutom.jpg">
  <source src="https://res.cloudinary.com/nuxt/video/upload/v1665063233/nuxt3/nuxt3-page-transitions-cutom.mp4" type="video/mp4">
</video>

## Переходы макетов

Вы можете включить переходы макетов для применения автоматического перехода ко всем вашим [макетам](/docs/guide/directory-structure/layouts).

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    layoutTransition: { name: 'layout', mode: 'out-in' }
  }
})
```

Чтобы начать добавлять переходы между вашими страницами и макетами, добавьте следующий CSS в ваш [`app.vue`](/docs/guide/directory-structure/app):

::code-group

```vue [app.vue]
<template>
  <NuxtLayout>
    <NuxtPage />
  </NuxtLayout>
</template>

<style>
.layout-enter-active,
.layout-leave-active {
  transition: all 0.4s;
}
.layout-enter-from,
.layout-leave-to {
  filter: grayscale(1);
}
</style>
```

```vue [layouts/default.vue]
<template>
  <div>
    <pre>макет по умолчанию</pre>
    <slot />
  </div>
</template>

<style scoped>
div {
  background-color: lightgreen;
}
</style>
```

```vue [layouts/orange.vue]
<template>
  <div>
    <pre>оранжевый макет</pre>
    <slot />
  </div>
</template>

<style scoped>
div {
  background-color: #eebb90;
  padding: 20px;
  height: 100vh;
}
</style>
```

```vue [pages/index.vue]
<template>
  <div>
    <h1>Главная страница</h1>
    <NuxtLink to="/about">Страница о нас</NuxtLink>
  </div>
</template>
```

```vue [pages/about.vue]
<script setup lang="ts">
definePageMeta({
  layout: 'orange'
})
</script>

<template>
  <div>
    <h1>Страница о нас</h1>
    <NuxtLink to="/">Главная страница</NuxtLink>
  </div>
</template>
```

::

Это дает следующий результат при навигации между страницами:

<video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665065289/nuxt3/nuxt3-layouts-transitions_c9hwlx.jpg">
  <source src="https://res.cloudinary.com/nuxt/video/upload/v1665065289/nuxt3/nuxt3-layouts-transitions_c9hwlx.mp4" type="video/mp4">
</video>

Аналогично `pageTransition`, вы можете применить пользовательский `layoutTransition` к компоненту страницы, используя `definePageMeta`:

```vue twoslash [pages/about.vue]
<script setup lang="ts">
definePageMeta({
  layout: 'orange',
  layoutTransition: {
    name: 'slide-in'
  }
})
</script>
```

## Глобальные настройки

Вы можете настроить эти имена переходов по умолчанию глобально, используя `nuxt.config`.

Оба ключа `pageTransition` и `layoutTransition` принимают [`TransitionProps`](https://vuejs.org/api/built-in-components.html#transition) как JSON-сериализуемые значения, где вы можете передать `name`, `mode` и другие валидные свойства переходов пользовательского CSS-перехода.

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    pageTransition: {
      name: 'fade',
      mode: 'out-in' // по умолчанию
    },
    layoutTransition: {
      name: 'slide',
      mode: 'out-in' // по умолчанию
    }
  }
})
```

::warning
Если вы изменяете свойство `name`, вам также необходимо переименовать CSS-классы соответственно.
::

Чтобы переопределить глобальное свойство перехода, используйте `definePageMeta` для определения переходов страницы или макета для отдельной страницы Nuxt и переопределения любых переходов страницы или макета, которые определены глобально в файле `nuxt.config`.

```vue twoslash [pages/some-page.vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: {
    name: 'bounce',
    mode: 'out-in' // по умолчанию
  }
})
</script>
```

## Отключение переходов

`pageTransition` и `layoutTransition` можно отключить для конкретного маршрута:

```vue twoslash [pages/some-page.vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: false,
  layoutTransition: false
})
</script>
```

Или глобально в `nuxt.config`:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    pageTransition: false,
    layoutTransition: false
  }
})
```

## JavaScript хуки

Для продвинутых случаев использования вы можете применять JavaScript хуки для создания высокодинамичных и пользовательских переходов для ваших Nuxt страниц.

Этот способ представляет идеальные случаи использования для JavaScript библиотек анимации, таких как [GSAP](https://gsap.com).

```vue twoslash [pages/some-page.vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: {
    name: 'custom-flip',
    mode: 'out-in',
    onBeforeEnter: (el) => {
      console.log('Before enter...')
    },
    onEnter: (el, done) => {},
    onAfterEnter: (el) => {}
  }
})
</script>
```

::tip
Узнайте больше о дополнительных [JavaScript хуках](https://vuejs.org/guide/built-ins/transition.html#javascript-hooks), доступных в компоненте `Transition`.
::

## Динамические переходы

Для применения динамических переходов с использованием условной логики, вы можете использовать встроенное [промежуточное ПО](/docs/guide/directory-structure/middleware) для назначения другого имени перехода в `to.meta.pageTransition`.

::code-group

```vue twoslash [pages/[id\\].vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: {
    name: 'slide-right',
    mode: 'out-in'
  },
  middleware (to, from) {
    if (to.meta.pageTransition && typeof to.meta.pageTransition !== 'boolean')
      to.meta.pageTransition.name = +to.params.id! > +from.params.id! ? 'slide-left' : 'slide-right'
  }
})
</script>

<template>
  <h1>#{{ $route.params.id }}</h1>
</template>

<style>
.slide-left-enter-active,
.slide-left-leave-active,
.slide-right-enter-active,
.slide-right-leave-active {
  transition: all 0.2s;
}
.slide-left-enter-from {
  opacity: 0;
  transform: translate(50px, 0);
}
.slide-left-leave-to {
  opacity: 0;
  transform: translate(-50px, 0);
}
.slide-right-enter-from {
  opacity: 0;
  transform: translate(-50px, 0);
}
.slide-right-leave-to {
  opacity: 0;
  transform: translate(50px, 0);
}
</style>
```

```vue [layouts/default.vue]
<script setup lang="ts">
const route = useRoute()
const id = computed(() => Number(route.params.id || 1))
const prev = computed(() => '/' + (id.value - 1))
const next = computed(() => '/' + (id.value + 1))
</script>

<template>
  <div>
    <slot />
    <div v-if="$route.params.id">
      <NuxtLink :to="prev">⬅️</NuxtLink> |
      <NuxtLink :to="next">➡️</NuxtLink>
    </div>
  </div>
</template>
```

::

Теперь страница применяет переход `slide-left` при переходе к следующему id и `slide-right` для предыдущего:

<video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665069410/nuxt3/nuxt-dynamic-page-transitions.jpg">
  <source src="https://res.cloudinary.com/nuxt/video/upload/v1665069410/nuxt3/nuxt-dynamic-page-transitions.mp4" type="video/mp4">
</video>

## Переходы с NuxtPage

Когда `<NuxtPage />` используется в `app.vue`, переходы можно настроить с помощью пропа `transition` для активации переходов глобально.

```vue [app.vue]
<template>
  <div>
    <NuxtLayout>
      <NuxtPage :transition="{
        name: 'bounce',
        mode: 'out-in'
      }" />
    </NuxtLayout>
  </div>
</template>
```

::note
Помните, что этот переход страницы нельзя переопределить с помощью `definePageMeta` на отдельных страницах.
::

## View Transitions API (экспериментальный)

Nuxt поставляется с экспериментальной реализацией [**View Transitions API**](https://developer.chrome.com/docs/web-platform/view-transitions) (см. [MDN](https://developer.mozilla.org/en-US/docs/Web/API/View_Transitions_API)). Это захватывающий новый способ реализации нативных браузерных переходов, которые (среди прочего) имеют возможность создавать переходы между несвязанными элементами на разных страницах.

Вы можете посмотреть демо на https://nuxt-view-transitions.surge.sh и [исходный код на StackBlitz](https://stackblitz.com/edit/nuxt-view-transitions).

Интеграция Nuxt находится в активной разработке, но может быть включена с помощью опции `experimental.viewTransition` в вашем конфигурационном файле:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    viewTransition: true
  }
})
```

Возможные значения: `false`, `true` или `'always'`.

Если установлено в true, Nuxt не будет применять переходы, если браузер пользователя соответствует `prefers-reduced-motion: reduce` (рекомендуется). Если установлено в `always`, Nuxt всегда будет применять переход, и вы сами должны учитывать предпочтения пользователя.

По умолчанию переходы представлений включены для всех [страниц](/docs/guide/directory-structure/pages), но вы можете установить другое глобальное значение по умолчанию.

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    // Отключить переходы представлений глобально и включать на основе отдельных страниц
    viewTransition: false
  },
})
```

Можно переопределить значение `viewTransition` по умолчанию для страницы, установив ключ `viewTransition` в [`definePageMeta`](/docs/api/utils/define-page-meta) страницы:

```vue twoslash [pages/about.vue]
<script setup lang="ts">
definePageMeta({
  viewTransition: false
})
</script>
```

::warning
Переопределение переходов представлений на основе отдельных страниц будет иметь эффект только если вы включили опцию `experimental.viewTransition`.
::

Если вы также используете переходы Vue, такие как `pageTransition` и `layoutTransition` (см. выше) для достижения того же результата, что и новый View Transitions API, то вы можете захотеть _отключить_ переходы Vue, если браузер пользователя поддерживает более новый, нативный веб-API. Вы можете сделать это, создав `~/middleware/disable-vue-transitions.global.ts` со следующим содержимым:

```ts
export default defineNuxtRouteMiddleware(to => {
  if (import.meta.server || !document.startViewTransition) { return }

  // Отключить встроенные переходы Vue
  to.meta.pageTransition = false
  to.meta.layoutTransition = false
})
```

### Известные проблемы

- Если вы выполняете загрузку данных в функциях настройки страницы, вы можете пересмотреть использование этой функции на данный момент. (По дизайну View Transitions полностью замораживают обновления DOM во время их выполнения.) Мы рассматриваем ограничение View Transition до финальных моментов перед разрешением `<Suspense>`, но в промежуточный период вы можете тщательно рассмотреть, стоит ли принимать эту функцию, если это относится к вам.