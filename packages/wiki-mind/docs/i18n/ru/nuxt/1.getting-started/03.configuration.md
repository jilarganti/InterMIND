---
title: "Конфигурация"
description: "Nuxt настроен с разумными значениями по умолчанию, чтобы сделать вас продуктивными."
navigation.icon: i-lucide-cog
---

По умолчанию Nuxt настроен для покрытия большинства случаев использования. Файл [`nuxt.config.ts`](/docs/guide/directory-structure/nuxt-config) может переопределить или расширить эту конфигурацию по умолчанию.

## Конфигурация Nuxt

Файл [`nuxt.config.ts`](/docs/guide/directory-structure/nuxt-config) расположен в корне проекта Nuxt и может переопределять или расширять поведение приложения.

Минимальный файл конфигурации экспортирует функцию `defineNuxtConfig`, содержащую объект с вашей конфигурацией. Помощник `defineNuxtConfig` доступен глобально без импорта.

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  // Моя конфигурация Nuxt
})
```

Этот файл часто упоминается в документации, например, для добавления пользовательских скриптов, регистрации модулей или изменения режимов рендеринга.

::read-more{to="/docs/api/configuration/nuxt-config"}
Каждая опция описана в **Справочнике конфигурации**.
::

::note
Вам не обязательно использовать TypeScript для создания приложения с Nuxt. Однако настоятельно рекомендуется использовать расширение `.ts` для файла `nuxt.config`. Таким образом вы сможете получить подсказки в вашей IDE, чтобы избежать опечаток и ошибок при редактировании конфигурации.
::

### Переопределения окружения

Вы можете настроить полностью типизированные переопределения для каждого окружения в вашем nuxt.config

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  $production: {
    routeRules: {
      '/**': { isr: true }
    }
  },
  $development: {
    //
  },
  $env: {
    staging: {
      // 
    }
  },
})
```

Чтобы выбрать окружение при выполнении команды Nuxt CLI, просто передайте имя в флаг `--envName`, например: `nuxt build --envName staging`.

Чтобы узнать больше о механизме этих переопределений, обратитесь к документации `c12` по [конфигурации для конкретного окружения](https://github.com/unjs/c12?tab=readme-ov-file#environment-specific-configuration).

:video-accordion{title="Посмотрите видео от Alexander Lichter о nuxt.config.ts с поддержкой окружений" videoId="DFZI2iVCrNc"}

::note
Если вы создаете слои, вы также можете использовать ключ `$meta` для предоставления метаданных, которые можете использовать вы или потребители вашего слоя.
::

### Переменные окружения и приватные токены

API `runtimeConfig` предоставляет значения, такие как переменные окружения, остальной части вашего приложения. По умолчанию эти ключи доступны только на стороне сервера. Ключи внутри `runtimeConfig.public` и `runtimeConfig.app` (который используется Nuxt внутренне) также доступны на стороне клиента.

Эти значения должны быть определены в `nuxt.config` и могут быть переопределены с помощью переменных окружения.

::code-group

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  runtimeConfig: {
    // Приватные ключи, которые доступны только на стороне сервера
    apiSecret: '123',
    // Ключи внутри public также доступны на стороне клиента
    public: {
      apiBase: '/api'
    }
  }
})
```

```ini [.env]
# Это переопределит значение apiSecret
NUXT_API_SECRET=api_secret_token
```

::

Эти переменные доступны остальной части вашего приложения с помощью композабла [`useRuntimeConfig()`](/docs/api/composables/use-runtime-config).

```vue [pages/index.vue]
<script setup lang="ts">
const runtimeConfig = useRuntimeConfig()
</script>
```

:read-more{to="/docs/guide/going-further/runtime-config"}

## Конфигурация приложения

Файл `app.config.ts`, расположенный в исходной директории (по умолчанию в корне проекта), используется для экспорта публичных переменных, которые могут быть определены во время сборки. В отличие от опции `runtimeConfig`, они не могут быть переопределены с помощью переменных окружения.

Минимальный файл конфигурации экспортирует функцию `defineAppConfig`, содержащую объект с вашей конфигурацией. Помощник `defineAppConfig` доступен глобально без импорта.

```ts [app.config.ts]
export default defineAppConfig({
  title: 'Hello Nuxt',
  theme: {
    dark: true,
    colors: {
      primary: '#ff0000'
    }
  }
})
```

Эти переменные доступны в остальной части вашего приложения через композабл [`useAppConfig`](/docs/api/composables/use-app-config).

```vue [pages/index.vue]
<script setup lang="ts">
const appConfig = useAppConfig()
</script>
```

:read-more{to="/docs/guide/directory-structure/app-config"}

## `runtimeConfig` против `app.config`

Как было сказано выше, `runtimeConfig` и `app.config` используются для предоставления переменных остальной части вашего приложения. Чтобы определить, что следует использовать, вот несколько рекомендаций:

- `runtimeConfig`: Приватные или публичные токены, которые необходимо указать после сборки с использованием переменных окружения.
- `app.config`: Публичные токены, которые определяются во время сборки, конфигурация веб-сайта, такая как вариант темы, заголовок и любая конфигурация проекта, которая не является конфиденциальной.

Функция                        | `runtimeConfig`  | `app.config`
-------------------------------|------------------|-------------------
Клиентская сторона             | Гидратированный  | Встроенный
Переменные окружения           | ✅ Да            | ❌ Нет
Реактивность                   | ✅ Да            | ✅ Да
Поддержка типов                | ✅ Частично      | ✅ Да
Конфигурация на запрос         | ❌ Нет           | ✅ Да
Горячая замена модулей         | ❌ Нет           | ✅ Да
Непримитивные типы JS          | ❌ Нет           | ✅ Да

## Внешние файлы конфигурации

Nuxt использует файл [`nuxt.config.ts`](/docs/guide/directory-structure/nuxt-config) как единственный источник истины для конфигураций и пропускает чтение внешних файлов конфигурации. В процессе создания вашего проекта у вас может возникнуть необходимость настроить их. Следующая таблица выделяет общие конфигурации и, где применимо, как они могут быть настроены с помощью Nuxt.

Название                                     | Файл конфигурации         |  Как настроить
---------------------------------------------|---------------------------|-------------------------
[Nitro](https://nitro.build)               | ~~`nitro.config.ts`~~     | Используйте ключ [`nitro`](/docs/api/nuxt-config#nitro) в `nuxt.config`
[PostCSS](https://postcss.org)               | ~~`postcss.config.js`~~   | Используйте ключ [`postcss`](/docs/api/nuxt-config#postcss) в `nuxt.config`
[Vite](https://vite.dev)                     | ~~`vite.config.ts`~~      | Используйте ключ [`vite`](/docs/api/nuxt-config#vite) в `nuxt.config`
[webpack](https://webpack.js.org)            | ~~`webpack.config.ts`~~   | Используйте ключ [`webpack`](/docs/api/nuxt-config#webpack-1) в `nuxt.config`

Вот список других распространенных файлов конфигурации:

Название                                     | Файл конфигурации       | Как настроить
---------------------------------------------|-------------------------|--------------------------
[TypeScript](https://www.typescriptlang.org) | `tsconfig.json`         | [Подробнее](/docs/guide/concepts/typescript#nuxttsconfigjson)
[ESLint](https://eslint.org)                 | `eslint.config.js`      | [Подробнее](https://eslint.org/docs/latest/use/configure/configuration-files)
[Prettier](https://prettier.io)              | `prettier.config.js`    | [Подробнее](https://prettier.io/docs/en/configuration.html)
[Stylelint](https://stylelint.io)            | `stylelint.config.js`   | [Подробнее](https://stylelint.io/user-guide/configure)
[TailwindCSS](https://tailwindcss.com)       | `tailwind.config.js`    | [Подробнее](https://tailwindcss.nuxtjs.org/tailwindcss/configuration)
[Vitest](https://vitest.dev)                 | `vitest.config.ts`      | [Подробнее](https://vitest.dev/config/)

## Конфигурация Vue

### С Vite

Если вам нужно передать опции в `@vitejs/plugin-vue` или `@vitejs/plugin-vue-jsx`, вы можете сделать это в вашем файле `nuxt.config`.

- `vite.vue` для `@vitejs/plugin-vue`. Проверьте [доступные опции](https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue).
- `vite.vueJsx` для `@vitejs/plugin-vue-jsx`. Проверьте [доступные опции](https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue-jsx).

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  vite: {
    vue: {
      customElement: true
    },
    vueJsx: {
      mergeProps: true
    }
  }
})
```

:read-more{to="/docs/api/configuration/nuxt-config#vue"}

### С webpack

Если вы используете webpack и вам нужно настроить `vue-loader`, вы можете сделать это, используя ключ `webpack.loaders.vue` внутри вашего файла `nuxt.config`. Доступные опции [определены здесь](https://github.com/vuejs/vue-loader/blob/main/src/index.ts#L32-L62).

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  webpack: {
    loaders: {
      vue: {
        hotReload: true,
      }
    }
  }
})
```

:read-more{to="/docs/api/configuration/nuxt-config#loaders"}

### Включение экспериментальных функций Vue

Вам может потребоваться включить экспериментальные функции в Vue, такие как `propsDestructure`. Nuxt предоставляет простой способ сделать это в `nuxt.config.ts`, независимо от того, какой сборщик вы используете:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  vue: {
    propsDestructure: true
  }
})
```

#### Экспериментальная миграция `reactivityTransform` из Vue 3.4 и Nuxt 3.9

Начиная с Nuxt 3.9 и Vue 3.4, `reactivityTransform` был перемещен из Vue в Vue Macros, который имеет [интеграцию с Nuxt](https://vue-macros.dev/guide/nuxt-integration.html).

:read-more{to="/docs/api/configuration/nuxt-config#vue-1"}